{% extends 'layouts/base.html' %}

{% block bodyclass %} hold-transition sidebar-mini layout-fixed {% endblock bodyclass %}

{% block content %}
  <div class="content-wrapper">
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>{{ exam.title }}</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item"><a href="{% url 'exams:exam_list' %}">Exams</a></li>
              <li class="breadcrumb-item active">{{ exam.title }}</li>
            </ol>
          </div>
        </div>
      </div>
    </section>

    <section class="content">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">Take Exam</h3>
        </div>
        <div class="card-body">

          {% if not attempt %}
          <form method="post">
            {% csrf_token %}
            <input type="hidden" name="action" value="start">
            <button class="btn btn-primary">Start Exam (uses 1 credit)</button>
          </form>
          {% else %}

          <form method="post" action="">
            {% csrf_token %}
            {% for q in questions %}
            <div class="mb-3">
              <p><strong>Q{{ forloop.counter }}.</strong> {{ q.text }}</p>
              {% if q.image %}
              <img src="{{ q.image.url }}" class="img-fluid mb-2" />
              {% endif %}
              <div>
                {% for c in q.choices.all %}
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="answer_{{ q.id }}" id="choice_{{ c.id }}" value="{{ c.id }}">
                  <label class="form-check-label" for="choice_{{ c.id }}">{{ c.text }}</label>
                </div>
                {% endfor %}
              </div>
            </div>
            {% endfor %}

            <button type="submit" class="btn btn-success">Submit Exam</button>
          </form>
          {% endif %}

        </div>
        <div class="card-footer">
        </div>
      </div>
    </section>
  </div>
{% endblock %}
